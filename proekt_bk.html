<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="css/bship.css">
<style>

</style>
</head>
<body>
<div id="first">
<h2>Игра</h2>
<h1>ПИРАТСКИ КОРАБИ</h1>
<h4>тип морски шах</h4>
<div id="description">
<p class="text1">Пирати искат да нападнат остров Папая. Тяхната флотилия се състой от три кораба. За да спасиш островитяните, ти трябва да обезвредиш корабите, като ги откриеш.</p>
<button id="start">Start</button>
<button id="refresh">Refresh</button>
</div>



</div>
<div id="second">
<h2>Игра</h2>
<h1>ПИРАТСКИ КОРАБИ</h1>
<p id="notship"></p>
    <table id="myTable">
      <tr>
        <td id="00">X</td>
        <td id="01">X</td>
        <td id="02">X</td>
        <td id="03">X</td>
        <td id="04">X</td>
        <td id="05">X</td>
        <td id="06">X</td> 
      </tr>
      <tr>
        <td id="10">X</td>
        <td id="11">X</td>
        <td id="12">X</td>
        <td id="13">X</td>
        <td id="14">X</td>
        <td id="15">X</td>
        <td id="16">X</td> 
      </tr>
      <tr>
        <td id="20">X</td>
        <td id="21">X</td>
        <td id="22">X</td>
        <td id="23">X</td>
        <td id="24">X</td>
        <td id="25">X</td>
        <td id="26">X</td> 
      </tr>
      <tr>
        <td id="30">X</td>
        <td id="31">X</td>
        <td id="32">X</td>
        <td id="33">X</td>
        <td id="34">X</td>
        <td id="35">X</td>
        <td id="36">X</td> 
      </tr>
      <tr>
        <td id="40">X</td>
        <td id="41">X</td>
        <td id="42">X</td>
        <td id="43">X</td>
        <td id="44">X</td>
        <td id="45">X</td>
        <td id="46">X</td> 
      </tr>
      <tr>
        <td id="50">X</td>
        <td id="51">X</td>
        <td id="52">X</td>
        <td id="53">X</td>
        <td id="54">X</td>
        <td id="55">X</td>
        <td id="56">X</td> 
      </tr>
      <tr>
        <td id="60">X</td>
        <td id="61">X</td>
        <td id="62">X</td>
        <td id="63">X</td>
        <td id="64">X</td>
        <td id="65">X</td>
        <td id="66">X</td> 
      </tr>
    </table>
</div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
 var shipArr=[];

$(document).ready(function(){

    var h2=$("h2");
    h2.animate({left: '100px'}, "slow");
    h2.animate({fontSize: '2em'}, "slow");
    var h1=$("h1");
    h1.animate({left: '100px'}, "slow");
    h1.animate({fontSize: '3em'}, "slow");
    $("#start").click(function(){
        $("#first").hide(1000);//скриване на всичко от div с id=first

        $("#second").fadeIn(3000);
        $("#myTable").fadeIn(3000);
        $("td").addClass("water");//на всички <td> се присвоява клас water
       
        //======присвояване клас ship на случайно избрани клетки======//
       // var shipArr=[];
        for (var numShip = 0; numShip < 3; numShip++) {
                
        var col = Math.floor((Math.random() * 5) + 1);
       // document.getElementById("demo").innerHTML = col;
        var row = Math.floor((Math.random() * 6) + 0);
       // document.getElementById("demo1").innerHTML = row;
        var idtd = col*10 + row; 
        var residtd = idtd.toString();
        if (document.getElementById(residtd).className != "ship") {
            //document.getElementById("anew").className = "ship";
            document.getElementById(residtd).className = "ship";
            console.log(idtd);
            shipArr[numShip]= idtd; 
          //  console.log(shipArr[numShip]);
            //numShip=numShip+1;            
        } else if (col!=6) {
            col=col+1;
            } else {
                col = col -1;
            }
            var idtd = col*10 + row; 
            var residtd = idtd.toString();
            document.getElementById(residtd).className = "ship";
           // console.log(idtd);
            shipArr[numShip]= idtd;
           // console.log(shipArr[numShip]); 

           // numShip=numShip+1; 
        }
   
       // $( ".ship" ).hide();
    //document.getElementById("45").style()
        //$("#anew").addClass("ship");
        //document.getElementById("demo3").innerHTML = idTd;
    


//========== сменя цвета на клетката от синьо в сиво при избор на тази клетка, ако не е кораб, ако е кораб се показва той
    var numberHitShip=0;
    var notHit=0;
    $("td").click(function(){ 
        
       // $("#text1").text("Браво! Ти позна всички кораби!");
       if ($(this).hasClass("ship") ) {
           $(this).css("background", "url('img/ship.png') no-repeat center center" );
           document.getElementById("notship").innerHTML = "Браво! Ти позна кораб!";
           numberHitShip = numberHitShip + 1;
           //alert(numberHitShip);
           if (numberHitShip>=3) {
            //какво става когато са открити всички кораби
           // alert(numberHitShip);
            var notHit1 = notHit + 3;
            document.getElementById("notship").innerHTML = "Браво! Ти позна всички кораби след "+notHit1 +" опита!";
           
           }
          // $(this).show();    
        }else if (numberHitShip<3) {
            var color = $(this).css('background-color');
            if (color != '#0ba2e3') {
           // if (($(this).css("background-color"))!= "#cccccc") {
                notHit = notHit+1;
             }   else {
                notHit = notHit;
             }
            //============} else { //за 
           //$(this).css("background-color", '#cccccc');
           //смяна на сивия '#cccccc' със син цвят '#0ba2e3'
           $(this).css({"background-color": '#0ba2e3', "color": "red"});
           var thisHotHitId=$(this).attr('id');
           var resRowNot = thisHotHitId.substr(0, 1);
           var resColNot = thisHotHitId.substr(1, 1);
          // alert(resColNot);
          // alert(thisHotHitId, resRowNot, resColNot);
          // alert($(this).attr('id'));

                //notHit = notHit+1;
           //да се изпише колко кораби има в тази редица и в тази колона
             
          var residtdArr0 = shipArr[0].toString();
          var residtdArr1 = shipArr[1].toString();
          var residtdArr2 = shipArr[2].toString();
           document.getElementById("notship").innerHTML = "Не уцели!";
           // console.log(shipArr[0]);
           //console.log(residtdArr1);
           var resRowShips0 = residtdArr0.substr(0, 1);//
           var resColShips0 = residtdArr0.substr(1, 1);//
           var resRowShips1 = residtdArr1.substr(0, 1);//
           var resColShips1 = residtdArr1.substr(1, 1);//
           var resRowShips2 = residtdArr2.substr(0, 1);//
           var resColShips2 = residtdArr2.substr(1, 1);//
            //console.log("row ",resRowShips0);
             //console.log("col ",resColShips0);
             if ((resRowNot==resRowShips0) || (resRowNot==resRowShips1) || (resRowNot==resRowShips2)) {
                 document.getElementById("notship").innerHTML = "Не уцели! На този ред има кораб.";
                 if ((resRowNot==resRowShips0) && (resRowNot==resRowShips1)) {document.getElementById("notship").innerHTML = "Не уцели! На този ред има поне два кораба.";}
                 if ((resRowNot==resRowShips0) && (resRowNot==resRowShips2)) {document.getElementById("notship").innerHTML = "Не уцели! На този ред има поне два кораба.";}
                 if ((resRowNot==resRowShips2) && (resRowNot==resRowShips1)) {document.getElementById("notship").innerHTML = "Не уцели! На този ред има поне два кораба.";}
             }
             if ((resColNot==resColShips0) || (resColNot==resColShips1) ||(resColNot==resColShips2)) {
                 document.getElementById("notship").innerHTML = "Не уцели! На тази колона има кораб.";
                 if ((resColNot==resColShips0) && (resColNot==resColShips1)) {document.getElementById("notship").innerHTML = "Не уцели! На тази колона има поне два кораба.";}
                 if ((resColNot==resColShips0) && (resColNot==resColShips2)) {document.getElementById("notship").innerHTML = "Не уцели! На тази колона има поне два кораба.";}
                 if ((resColNot==resColShips2) && (resColNot==resColShips1)) {document.getElementById("notship").innerHTML = "Не уцели! На тази колона има поне два кораба.";}
             }

         //=======}//else за сивия цвят, да не брой повторно натискане върху такава клетка
        }


    });


});
     

//==========

//========== сменя цвета на клетката от синьо в сиво при избор на тази клетка
/*
$("td").click(function(){  
        $(this).css("background-color", "#cccccc");
    });
*/
//==========



});//end ready
</script>

</body>
</html>
